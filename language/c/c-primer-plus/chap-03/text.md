# 数据和 C

## 数据：数据类型关键字

| 最初 K&R 给出的关键字 | C90 标准添加的关键字 | C99 标准添加的关键字 |
| --------------------- | -------------------- | -------------------- |
| `int`                 | `signed`             | `_Bool`              |
| `long`                | `void`               | `_Complex`           |
| `short`               | &nbsp;               | `_Imaginary`         |
| `unsigned`            | &nbsp;               | &nbsp;               |
| `char`                | &nbsp;               | &nbsp;               |
| `float`               | &nbsp;               | &nbsp;               |
| `doublee`             | &nbsp;               | &nbsp;               |

通过这些关键字创建的类型，按计算机的储存方式可分为两大基本类型：整数类型和浮点数类型。

### 1.整数和浮点数

7 是整数，7.0是浮点数。这里关键要理解浮点数和整数的储存方案不同。计算机把浮点数分成小数部分和指数部分来表示，而且分开储存这两部分。

> 对一些算术运算（如大数相减），浮点数损失的精度更多。
> 因为在任何区间内都存在无穷多个实数，所有计算机的浮点数不能表示区间内所有的值。浮点数通常只是实际值的近似值。（如 7.0 可能被储存为浮点值 6.99999）
> 过去，浮点运算比整数运算慢。不过，现在许多 CPU 都包含浮点处理器，缩小了速度上的差距。

#### 1.1.`int`

`int` 类型是有符号整型。其取值范围依计算机系统而异。一般而言，储存一个 `int` 要占用一个机器字长。

早期的 16 位 IBM PC 兼容机使用 16 位来储存一个 `int` 值，其取值范围是 `-32768 ~ 32767`。目前的个人计算机一般是 32 或 64 位，因此用 32 或 64 位储存一个 `int` 值。

#### 1.2.`short (int)`

有符号类型，占用的储存空间可能比 `int` 类型少，常用于较小数值的场合以节省空间。

#### 1.3.`long (int)`

有符号类型，占用的储存空间可能比 `int` 类型多，适用于较大数值的场合。

#### 1.4.`long long (int)`

有符号类型，占用的储存空间可能比 `long` 类型多，适用于更大数值的场合。改类型至少占 64 位。

#### 1.5.`unsigned (int)`

无符号类型，只用于非负值的场合。这种类型与有符号为类型表示的范围不同。例如 16 位 `unsigned int` 允许的取值范围是 `0 ~ 65535`，而不是 `-32768 ~ 32767`。用于表示正负号的位现在用于表示另一个二进制位，所以无符号整型可以表示更大的数。

> `short` 可能比 `int` 占空间少，`long` 可能比 `int` 占空间多？
> 因为 C 语言只规定 `short` 占用的储存空间不能多于 `int`，`long` 占用的储存空间不能少于 `int`。这样规定是为了适应不同的机器。

#### 1.6.使用范围

C 标准对基本数据类型只规定了允许的最大最小值。

对于 16 位：

- `short` 和 `int` 的最小取值范围是 `[-32767, 32767]`。

对于 32 位：

- `long` 的最小取值范围是 `[-2147483647, 2147483647]`；
- `unsigned short` 和 `unsigned int`，最小取值范围是 `[0, 65535]`；
- `unsigned long` 的最小取值范围是 `[0, 4294967295]`;

对于 64 位：

- `long long` 的最小取值范围是 `[-9223372036854775807, 9223372036854775807]`；
- `unsigned long long` 最小取值范围是 `[0, 18446744073709551615]`。

首先考虑 `unsigned` 类型，这种类型常用于计数，因为计数不用负数。

如果超出了 `int` 类型的范围，且在 `long` 类型取值范围内，使用 `long` 类型。

1. 对于那些 `long` 类型占用的空间比 `int` 大的系统，使用 `long` 类型会减慢运算速度。因此，如非必要，不要使用 `long` 类型。
2. 对那些  `long` 类型占用的空间和 `int` 相同的系统，确实需要 32 位时，应使用 `long` 类型而非 `int` 类型，以便把程序移值到 16 位机后仍然可以正常工作。

如果在 `int` 设置位 32 位的系统中要使用 16 位的值，应使用 `short` 类型以节省储存空间。通常，只有当程序使用相对于系统可用内存较大的整型数组时，才需要重点考虑节省空间的问题。使用 `short` 类型的应一个原因是，计算机中某些组件使用的硬件寄存器是 16 位。

<!-- 68/751 -->
